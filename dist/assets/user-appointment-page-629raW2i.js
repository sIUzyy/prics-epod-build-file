import{r,j as e,P as c,a as f,t as N}from"./index-B_BwmF1n.js";import{H as j}from"./page-heading-Dndd7_7V.js";import{J as g}from"./JsBarcode-BXTDqrij.js";import{g as h}from"./generateGatePass-nBJaPomR.js";import{d as n,t as u,u as v}from"./timezone-DcS6W5tV.js";import{a as w}from"./index-DW_MHI2K.js";n.extend(u);const d="Asia/Manila";function p({appt:t}){const a=r.useRef(null);return r.useEffect(()=>{a.current&&g(a.current,t.appointment_id,{format:"CODE128",displayValue:!0})},[t.appointment_id]),e.jsxs("div",{className:"my-5 ",children:[e.jsx("canvas",{ref:a,className:"w-full "}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090]",children:"Appointment Id"}),e.jsx("input",{type:"text",value:t.appointment_id,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Appointment Date"}),e.jsx("input",{type:"text",value:n(t.appointment_date).tz(d).format("MMMM DD, YYYY"),readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Appointment Time"}),e.jsx("input",{type:"text",value:n(t.appointment_time).tz(d).format("hh:mm A"),readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Warehouse Name"}),e.jsx("input",{type:"text",value:t.warehouse_name,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Warehouse Name"}),e.jsx("input",{type:"text",value:t.warehouse_address,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Activity"}),e.jsx("input",{type:"text",value:t.activity,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Parking Slot"}),e.jsx("input",{type:"text",value:t.parking_slot,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsxs("div",{className:"my-5",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090] ",children:"Dock"}),e.jsx("input",{type:"text",value:t.dock,readOnly:!0,className:"p-4 w-full mt-2 rounded-md cursor-not-allowed bg-gray-100 outline-none"})]}),e.jsx("button",{onClick:()=>h(t.appointment_id),className:"w-full p-3 rounded-md bg-black text-white font-inter font-bold hover:opacity-75 transition-opacity duration-300 2xl:p-4 cursor-pointer",children:"Download Barcode"})]})}p.propTypes={appt:c.array};n.extend(v);n.extend(u);const i="Asia/Manila";function x({data:t}){const a=n().tz(i).format("YYYY-MM-DD"),l=t==null?void 0:t.filter(s=>n(s.appointment_date).tz(i).format("YYYY-MM-DD")===a).sort((s,o)=>n(s.appointment_time).tz(i).diff(n(o.appointment_time).tz(i)));return e.jsx("div",{children:l.length>0?l.map((s,o)=>e.jsx(p,{appt:s},o)):e.jsx("p",{className:"text-gray-500 font-medium",children:"No appointments for today."})})}x.propTypes={data:c.array};const b="https://prics-epod-backend.onrender.com";function k(){const{user:t}=f(),[a,l]=r.useState([]),[s,o]=r.useState(!1);return r.useEffect(()=>{(async()=>{o(!0);try{const m=t.plateNo,y=await w.get(`${b}/api/appointment/${m}`);l(y.data.appointments)}catch(m){console.log(m),N.error("We could not retrieve your appointment data. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{o(!1)}})()},[t.plateNo]),e.jsxs("div",{className:"my-5 mx-4",children:[e.jsx(j,{title:"my appointment",description:"Below is an overview of all your scheduled appointments"}),s?e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading..."}):e.jsx(x,{data:a})]})}export{k as default};
