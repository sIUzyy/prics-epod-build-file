import{r as t,j as e,N as j,O,t as y}from"./index-Chad9CLA.js";import{A as _}from"./appointment-modal-B8vJgyBP.js";import{L}from"./loading-card-DoXf_Q8S.js";import{H as M}from"./page-heading-rmoYobWP.js";import{C as r,a as i,b as l,c}from"./card-BwenR6nc.js";import{a as b}from"./index-DW_MHI2K.js";import{d as N}from"./timezone-DS7qtbwd.js";import{C as g}from"./calendar-check-2-BF7h1SXI.js";import{T as P}from"./truck-CgxKwvM_.js";import{C as S}from"./calendar-plus-Cm3gfdkT.js";/* empty css                         */import"./loading-spinner-BUHlXXSt.js";import"./checkAppointment-jH_aoGtD.js";import"./clsx-B-dksMZM.js";import"./chevron-down-Bns3dQA9.js";import"./createLucideIcon-C2ToIokP.js";import"./dialog-COJMBmk8.js";import"./utils-9LinqH4U.js";const k="https://prics-epod-backend.onrender.com";function Z(){const[n,A]=t.useState([]),[d,T]=t.useState([]),[v,m]=t.useState(!1),[C,p]=t.useState(!1),w=v||C;t.useEffect(()=>{(async()=>{p(!0);try{const o=(await b.get(`${k}/api/appointment`)).data.appointments;A(o)}catch(s){console.error("Failed to fetch appointment",s),y.error("We could not retrieve your appointment data. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{p(!1)}})()},[]);const x=t.useMemo(()=>N().tz("Asia/Manila").startOf("day"),[]),f=t.useMemo(()=>n.filter(a=>N(a.appointment_date).tz("Asia/Manila").startOf("day").isSame(x,"day")).length,[n,x]);t.useEffect(()=>{(async()=>{m(!0);try{const o=(await b.get(`${k}/api/truck`)).data.truck;T(o)}catch(s){console.error("Failed to fetch truck:",s),y.error("We could not load your truck list data. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{m(!1)}})()},[]);const[u,h]=t.useState(!1),D=()=>{h(!0)};return e.jsxs(e.Fragment,{children:[u&&e.jsx(_,{open:u,setOpen:h}),e.jsxs("div",{className:"my-5 mx-4",children:[e.jsx(M,{title:"Appointment",description:"Below is an overview of your appointments."}),w?e.jsx(L,{}):e.jsxs("div",{className:"card_section flex gap-x-3",children:[e.jsxs(r,{className:"max-w-[320px]",children:[e.jsx(i,{children:e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx(l,{className:"font-inter text-base font-medium",children:"Today’s Appointment"}),e.jsx(g,{size:25})]})}),e.jsxs(c,{children:[e.jsx("h1",{className:"text-5xl font-bebas tracking-wider",children:f||0}),e.jsx("p",{className:"text-sm text-[#6c757d] mt-5",children:"Total Number of Appointments Scheduled for Today"})]})]}),e.jsxs(r,{className:"max-w-[320px]",children:[e.jsx(i,{children:e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx(l,{className:"font-inter text-base font-medium",children:"Total Appointment"}),e.jsx(g,{size:25})]})}),e.jsxs(c,{children:[e.jsx("h1",{className:"text-5xl font-bebas tracking-wider",children:n?n.length:"N/A"}),e.jsx("p",{className:"text-sm text-[#6c757d] mt-5",children:"Total number of appointments recorded in the system."})]})]}),e.jsxs(r,{className:"max-w-[320px]",children:[e.jsx(i,{children:e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx(l,{className:"font-inter text-base font-medium",children:"Total Trucks"}),e.jsx(P,{size:25})]})}),e.jsxs(c,{children:[e.jsx("h1",{className:"text-5xl font-bebas tracking-wider",children:d?d.length:0}),e.jsx("p",{className:"text-sm text-[#6c757d] mt-5",children:"Total number of trucks you own and have available for your operations or transport needs."})]})]})]}),e.jsxs("div",{className:"outlet_todays_all_appointment my-5  ",children:[e.jsxs("div",{className:"outlet_navigation flex gap-x-5",children:[e.jsx("div",{className:"create_appointment",children:e.jsx("button",{onClick:D,title:"create an appointment ",children:e.jsx(S,{className:"cursor-pointer"})})}),e.jsx(j,{to:"/admin/appointments/today-appointments",className:({isActive:a})=>a?"text-blue-500 font-bold underline decoration-2 underline-offset-5 uppercase":"text-[#979090] font-bold hover:text-blue-500 uppercase",children:"Today’s Appointment"}),e.jsx(j,{to:"/admin/appointments/all-appointments",className:({isActive:a})=>a?"text-blue-500 font-bold underline decoration-2 underline-offset-5 uppercase":"text-[#979090] font-bold hover:text-blue-500 uppercase",children:"All Appointment"})]}),e.jsx("div",{className:"outlet_table my-5",children:e.jsx(O,{})})]})]})]})}export{Z as default};
