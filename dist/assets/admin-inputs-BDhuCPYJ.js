import{a as E,c as j,r as e,j as s}from"./index-Chad9CLA.js";import{a as N}from"./index-DW_MHI2K.js";import{E as P}from"./ErrorMessage-BS5JYQ2c.js";import{L}from"./loading-spinner-BUHlXXSt.js";const S="https://prics-epod-backend.onrender.com";function D(){const{signIn:h}=E(),y=j(),[a,w]=e.useState(""),[n,x]=e.useState(""),[d,r]=e.useState(!1),[i,u]=e.useState(""),[l,c]=e.useState(""),[p,f]=e.useState(""),v=async o=>{var m,g;if(o.preventDefault(),r(!0),!a&&!n){u("Username field cannot be empty"),c("Password field cannot be empty"),r(!1);return}if(!a){u("Username field cannot be empty"),r(!1);return}if(!n){c("Password field cannot be empty"),r(!1);return}try{const t=await N.post(`${S}/api/user/signin`,{username:a,password:n});if(t.status===200){const b=t.data;b.role==="admin"?(h(b),console.log("Admin login successfully..."),y("/admin")):f("Access denied! You do not have the necessary permissions.")}}catch(t){console.log(t),f(((g=(m=t.response)==null?void 0:m.data)==null?void 0:g.message)||"Login failed. Please try again later")}finally{r(!1)}};return s.jsxs("div",{className:"w-full my-5",children:[s.jsx("input",{type:"email",placeholder:i||"Username",className:`border-1 p-3 w-full rounded-lg border-[#979090]  focus:outline-none focus:ring-2 focus:ring-blue-500 2xl:p-4 ${i?"placeholder-red-500 border-red-500":""}`,value:a,onChange:o=>{w(o.target.value),i&&u("")}}),s.jsx("input",{type:"password",placeholder:l||"Password",className:`border-1 p-3 w-full mt-4 rounded-lg border-[#979090]  focus:outline-none focus:ring-2 focus:ring-blue-500 2xl:p-4 ${l?"placeholder-red-500 border-red-500":""} `,value:n,onChange:o=>{x(o.target.value),l&&c("")}}),s.jsx("button",{onClick:v,className:d?"w-full mt-10 p-3 rounded-md bg-[#1877F2] text-white font-inter font-bold hover:opacity-75 transition-opacity duration-300 2xl:p-4 opacity-50 cursor-not-allowed":"w-full mt-10 p-3 rounded-md bg-[#1877F2] text-white font-inter font-bold hover:opacity-75 transition-opacity duration-300 2xl:p-4 cursor-pointer",disabled:d,children:d?s.jsx(L,{}):"Log In"}),p&&s.jsx(P,{message:p})]})}export{D as default};
