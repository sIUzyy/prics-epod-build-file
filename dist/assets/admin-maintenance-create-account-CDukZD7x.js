import{r as s,j as e,t as v,P as p}from"./index-Chad9CLA.js";import{e as $}from"./table-headers-NmVF5Ah3.js";import{O as M}from"./admin-order-summary-pagination-D35sU1a_.js";import{L as D}from"./loading-spinner-BUHlXXSt.js";import{a as P}from"./index-DW_MHI2K.js";import{T as O}from"./triangle-alert-coWZifT7.js";import{y as U,D as L,j as T,Y as E}from"./dialog-COJMBmk8.js";import{c as I}from"./createLucideIcon-C2ToIokP.js";import{u as F,S as z}from"./search-bar-CgsKbdwB.js";import{L as q}from"./loading-table-BAb0c7Cl.js";import{H}from"./page-heading-rmoYobWP.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Y=I("UserPlus",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],G=I("User",W),J="https://prics-epod-backend.onrender.com";function A({open:f,setOpen:r,selectedUserId:n,selectedUsername:o}){const[t,l]=s.useState(!1),i=async()=>{if(l(!0),!!n)try{(await P.delete(`${J}/api/user/${n}/delete-account`)).status===200&&(v.success(`Successfully deleted username ${o}`,{style:{backgroundColor:"#28a745",color:"#fff"}}),r(!1))}catch(m){console.error("Failed to delete appointment:",m),v.error(`Failed to delete username ${o}. Please try again later.`,{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{setTimeout(()=>{l(!1),window.location.reload()},1e3)}};return e.jsxs(U,{open:f,onClose:r,className:"relative z-10",children:[e.jsx(L,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs(T,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:[e.jsxs("div",{className:"bg-white   px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs(E,{as:"h1",className:"font-inter flex items-center gap-x-2 font-medium text-base tracking-wider",children:[e.jsx(O,{size:25,className:"text-red-500"})," Confirm deletion of username ",o,"?"]}),e.jsx("div",{className:"mt-5 ",children:e.jsx("p",{children:"This action cannot be undone. Once deleted, you will not be able to recover it."})})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",onClick:i,className:t?"inline-flex min-w-[120px] justify-center rounded-sm bg-red-600 px-10 py-2 text-center text-sm font-medium text-white shadow-xs  sm:ml-3 sm:w-auto cursor-progress opacity-50  ":"inline-flex w-full justify-center rounded-sm bg-red-600 px-10 py-2 text-center text-sm font-medium text-white shadow-xs hover:opacity-80 sm:ml-3 sm:w-auto cursor-pointer  ",disabled:t,children:t?e.jsxs("div",{className:"flex items-center gap-x-2",children:["Deleting",e.jsx(D,{})]}):"Delete"}),e.jsx("button",{type:"button","data-autofocus":!0,onClick:()=>r(!1),disabled:t,className:t?"mt-3 inline-flex w-full justify-center rounded-sm bg-white px-10 py-2 text-sm font-medium text-gray-900   cursor-not-allowed   hover:bg-gray-50 sm:mt-0 sm:w-auto border-1":"mt-3 inline-flex w-full justify-center rounded-sm bg-white px-10 py-2 text-sm font-medium text-gray-900   cursor-pointer   hover:bg-gray-50 sm:mt-0 sm:w-auto border-1",children:"Cancel"})]})]})})})]})}A.propTypes={open:p.bool.isRequired,setOpen:p.func.isRequired,selectedUserId:p.string.isRequired,selectedUsername:p.string.isRequired};const K="https://prics-epod-backend.onrender.com";function _({open:f,setOpen:r}){const[n,o]=s.useState(""),[t,l]=s.useState(""),[i,m]=s.useState(""),[C,k]=s.useState("guard"),[b,u]=s.useState(!1),[h,j]=s.useState(""),[y,g]=s.useState(""),[x,w]=s.useState(""),S=async d=>{if(d.preventDefault(),u(!0),!n&&!t&&!i){j("Name field cannot be empty"),g("Username field cannot be empty"),w("Password field cannot be empty"),u(!1);return}if(!n){j("Name field cannot be empty"),u(!1);return}if(!t){g("Username field cannot be empty"),u(!1);return}if(!i){w("Password field cannot be empty"),u(!1);return}try{const N={name:n,username:t,password:i,role:C};(await P.post(`${K}/api/user/signup`,N)).status===201&&(v.success("Successfully created an account for the guard role!",{style:{backgroundColor:"#28a745",color:"#fff"}}),o(""),l(""),m(""),r(!1),setTimeout(()=>{window.location.reload()},1500))}catch(N){console.error("Failed to create guard account:",N),v.error("Failed to create an account. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{u(!1)}};return e.jsxs(U,{open:f,onClose:r,className:"relative z-10",children:[e.jsx(L,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs(T,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:[e.jsxs("div",{className:"bg-white   px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs(E,{as:"h1",className:"font-inter flex items-center gap-x-2 font-medium text-base tracking-widest",children:[e.jsx(G,{size:20})," Create an Account"]}),e.jsxs("div",{className:"forms mt-5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm font-inter text-[#979090]",children:["Name ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Enter name",value:n,onChange:d=>{o(d.target.value),h&&j("")},className:`border p-4 w-full mt-1 rounded-md focus:outline-none focus:ring-2 
                        ${h?"border-red-500 focus:ring-red-500 placeholder-red-500":"border-gray-300 focus:ring-blue-500 placeholder-gray-400"}`}),h&&e.jsx("p",{className:"my-1 text-red-500 text-sm",children:h})]}),e.jsxs("div",{className:"flex-1 my-5",children:[e.jsxs("label",{className:"text-sm font-inter text-[#979090]",children:["Username ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Enter username",value:t,onChange:d=>{l(d.target.value),y&&g("")},className:`border p-4 w-full mt-1 rounded-md focus:outline-none focus:ring-2 
                        ${y?"border-red-500 focus:ring-red-500 placeholder-red-500":"border-gray-300 focus:ring-blue-500 placeholder-gray-400"}`}),y&&e.jsx("p",{className:"my-1 text-red-500 text-sm",children:y})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"text-sm font-inter text-[#979090]",children:["Password ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"password",placeholder:"Enter password",value:i,onChange:d=>{m(d.target.value),x&&w("")},className:`border p-4 w-full mt-1 rounded-md focus:outline-none focus:ring-2 
                        ${x?"border-red-500 focus:ring-red-500 placeholder-red-500":"border-gray-300 focus:ring-blue-500 placeholder-gray-400"}`}),x&&e.jsx("p",{className:"my-1 text-red-500 text-sm",children:x})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",onClick:S,className:b?"inline-flex w-full justify-center rounded-md bg-green-600 px-10 py-2 text-center text-sm font-medium text-white shadow-xs opacity-50 cursor-progress sm:ml-3 sm:w-auto":"inline-flex w-full justify-center rounded-md bg-green-600 px-10 py-2 text-center text-sm font-medium text-white shadow-xs hover:opacity-80 cursor-pointer sm:ml-3 sm:w-auto",disabled:b,children:b?e.jsxs("div",{className:"flex items-center gap-x-2",children:["Registering ",e.jsx(D,{})]}):"Register"}),e.jsx("button",{type:"button","data-autofocus":!0,onClick:()=>r(!1),className:"mt-3 inline-flex w-full justify-center rounded-md bg-white px-10 py-2 text-sm font-medium text-gray-900 ring-1 shadow-xs ring-gray-300 cursor-pointer  ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto",children:"Cancel"})]})]})})})]})}_.propTypes={open:p.bool.isRequired,setOpen:p.func.isRequired};function R({data:f}){const[r,n]=s.useState(!1),[o,t]=s.useState(!1),[l,i]=s.useState(""),[m,C]=s.useState(""),[k,b]=s.useState(1),[u,h]=s.useState(null),[j,y]=s.useState(null);F(()=>C(l),500,[l]);const g=f.filter(a=>{var c;return a.name.toLowerCase().includes(m.toLowerCase())||((c=a.username)==null?void 0:c.toLowerCase().includes(m.toLowerCase()))}),x=10,w=Math.ceil(g.length/x),S=(k-1)*x,d=g.slice(S,S+x),N=(a,c)=>{h(a),y(c),n(!0)};return e.jsxs(e.Fragment,{children:[o&&e.jsx(_,{open:o,setOpen:t}),r&&e.jsx(A,{open:r,setOpen:n,selectedUserId:u,selectedUsername:j}),e.jsx("div",{className:"table_section mt-5 font-inter w-full  ",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"-m-1.5 overflow-x-auto",children:e.jsx("div",{className:"p-1.5 min-w-full inline-block align-middle",children:e.jsxs("div",{className:"border rounded-lg divide-y divide-gray-200",children:[e.jsxs("div",{className:"py-5 px-4 flex justify-between items-center",children:[e.jsx(z,{searchTerm:l,setSearchTerm:i}),e.jsx("div",{children:e.jsx("button",{title:"Add User Account",className:"cursor-pointer",onClick:()=>t(!0),children:e.jsx(Y,{size:20})})})]}),e.jsx("div",{className:"overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"th-user-table",children:e.jsx("tr",{children:$.map((a,c)=>e.jsx("th",{className:"px-6 py-3",children:a},c))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map((a,c)=>e.jsxs("tr",{className:c%2===0?"bg-[#F3F4F6]":"",children:[e.jsx("td",{className:"td-admin-table ",children:c+1}),e.jsx("td",{className:"td-admin-table ",children:a.name}),e.jsx("td",{className:"td-admin-table ",children:a.username}),e.jsx("td",{className:"td-admin-table capitalize ",children:a.role}),e.jsx("td",{className:"td-user-table flex   ",children:e.jsx("button",{onClick:()=>N(a._id,a.username),className:"text-red-600 cursor-pointer outline-none",children:"Delete"})})]},a._id))})]})}),e.jsx(M,{currentPage:k,setCurrentPage:b,totalPages:w}),d.length===0&&e.jsx("p",{className:"text-gray-500 font-medium ml-5 py-5",children:"No user account list available."})]})})})})})]})}R.propTypes={data:p.array};const Q="https://prics-epod-backend.onrender.com";function ie(){const[f,r]=s.useState([]),[n,o]=s.useState(!1);return s.useEffect(()=>{(async()=>{o(!0);try{const i=(await P.get(`${Q}/api/user`)).data.guards;r(i)}catch(l){console.error("Failed to retrieve user:",l),v.error("We could not retrieve your user list data. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{o(!1)}})()},[]),e.jsxs("div",{className:"my-5 mx-4 w-[100vh]",children:[e.jsx(H,{title:"User List",description:"Overview of the guard account list for scanning the gate pass barcode."}),n?e.jsx(q,{}):e.jsx(R,{data:f})]})}export{ie as default};
