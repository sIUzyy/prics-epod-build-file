import{a as E,c as S,r as e,j as s}from"./index-Chad9CLA.js";import{a as j}from"./index-DW_MHI2K.js";import{E as N}from"./ErrorMessage-BS5JYQ2c.js";import{L as P}from"./loading-spinner-BUHlXXSt.js";const L="https://prics-epod-backend.onrender.com";function D(){const{signIn:b}=E(),h=S(),[a,w]=e.useState(""),[n,x]=e.useState(""),[c,r]=e.useState(!1),[i,d]=e.useState(""),[l,u]=e.useState(""),[p,f]=e.useState(""),v=async o=>{var m,g;if(o.preventDefault(),r(!0),!a&&!n){d("Username field cannot be empty"),u("Password field cannot be empty"),r(!1);return}if(!a){d("Username field cannot be empty"),r(!1);return}if(!n){u("Password field cannot be empty"),r(!1);return}try{const t=await j.post(`${L}/api/user/signin`,{username:a,password:n});if(t.status===200){const y=t.data;y.role=="guard"?(b(y),console.log("Security login successfully..."),h("/access-pass")):f("Access denied! You do not have the necessary permissions.")}}catch(t){console.log(t),f(((g=(m=t.response)==null?void 0:m.data)==null?void 0:g.message)||"Login failed. Please try again later")}finally{r(!1)}};return s.jsxs("div",{className:"w-full my-5",children:[s.jsx("input",{type:"email",placeholder:i||"Username",className:`border-1 p-3 w-full rounded-lg border-[#979090]  focus:outline-none focus:ring-2 focus:ring-blue-500 2xl:p-4 ${i?"placeholder-red-500 border-red-500":""}`,value:a,onChange:o=>{w(o.target.value),i&&d("")}}),s.jsx("input",{type:"password",placeholder:l||"Password",className:`border-1 p-3 w-full mt-4 rounded-lg border-[#979090]  focus:outline-none focus:ring-2 focus:ring-blue-500 2xl:p-4 ${l?"placeholder-red-500 border-red-500":""} `,value:n,onChange:o=>{x(o.target.value),l&&u("")}}),s.jsx("button",{onClick:v,className:c?"w-full mt-10 p-3 rounded-md bg-[#1877F2] text-white font-inter font-bold hover:opacity-75 transition-opacity duration-300 2xl:p-4 opacity-50 cursor-not-allowed":"w-full mt-10 p-3 rounded-md bg-[#1877F2] text-white font-inter font-bold hover:opacity-75 transition-opacity duration-300 2xl:p-4  cursor-pointer",disabled:c,children:c?s.jsx(P,{}):"Log In"}),p&&s.jsx(N,{message:p})]})}export{D as default};
