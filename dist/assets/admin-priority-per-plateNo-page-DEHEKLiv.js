import{r as d,j as e,t as h,P as m,d as j}from"./index-B_BwmF1n.js";import{C as b,a as v,b as w,c as P}from"./card-O2QYhjHN.js";import{a as y}from"./index-DW_MHI2K.js";import{c as k}from"./table-headers-NmVF5Ah3.js";import{L as E}from"./loading-spinner-B8jMO9FB.js";import{P as T}from"./pencil-DNZ5uVGn.js";import{y as S,D as C,j as D,Y as I}from"./dialog-CJT0ZLl1.js";import{D as f}from"./Color-DmAsVZgK.js";import{H as _}from"./hash-_Xs3Yqmk.js";import"./utils-9LinqH4U.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-DOLBm2BF.js";const z="https://prics-epod-backend.onrender.com";function g({open:s,setOpen:i,selectedTrackingNo:l}){const{trackingNo:a,priority:o}=l||{};console.log(l);const[c,n]=d.useState(o||""),[t,r]=d.useState(!1),u=async x=>{x.preventDefault(),r(!0);try{const p={priority:c};(await y.patch(`${z}/api/shipment/${a}/update-priority`,p)).status===200&&(h.success(`Successfully update the priority of tracking no. ${a}`,{style:{backgroundColor:"#28a745",color:"#fff"}}),setTimeout(()=>{window.location.reload()},1e3))}catch(p){console.log(p),h.error(`Failed to update the priority of tracking no. ${a}. Please try again later.`,{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{r(!1)}};return e.jsxs(S,{open:s,onClose:i,className:"relative z-10 ",children:[e.jsx(C,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in"}),e.jsx("div",{className:"fixed inset-0 z-10 w-screen  overflow-y-auto",children:e.jsx("div",{className:"flex w-full min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:e.jsxs(D,{transition:!0,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all data-closed:translate-y-4 data-closed:opacity-0 data-enter:duration-300 data-enter:ease-out data-leave:duration-200 data-leave:ease-in sm:my-8 sm:w-full sm:max-w-lg data-closed:sm:translate-y-0 data-closed:sm:scale-95",children:[e.jsxs("div",{className:"bg-white   px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs(I,{as:"h1",className:"font-inter flex items-center gap-x-2 font-medium text-base tracking-wider",children:[e.jsx(T,{size:20})," Edit Priority Order of tracking no."," ",a]}),e.jsx("div",{className:"mt-5 flex gap-x-5",children:e.jsxs("div",{className:"forms w-full",children:[e.jsxs("div",{className:"flex-1  ",children:[e.jsx("label",{className:"text-sm font-inter text-[#979090]",children:"Tracking No."}),e.jsx("input",{type:"text",value:a,readOnly:!0,disabled:!0,placeholder:"Tracking No.",className:" p-4 w-full mt-1 rounded-md  cursor-not-allowed bg-gray-100 "})]}),e.jsxs("div",{className:"flex-1 mt-5",children:[e.jsxs("label",{className:"text-sm font-inter text-[#979090]",children:["Priority ",e.jsx("span",{className:"text-red-600",children:"*"})]}),e.jsx("input",{type:"text",placeholder:"Enter priority order",value:c,onChange:x=>n(x.target.value),className:`border p-4 w-full mt-1 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500
                           `})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6",children:[e.jsx("button",{type:"button",onClick:u,className:t?"inline-flex w-full justify-center rounded-sm px-10 py-2 text-center text-sm font-medium text-white shadow-xs sm:ml-3 sm:w-auto bg-green-600 cursor-progress opacity-50":"inline-flex w-full justify-center rounded-sm px-10 py-2 text-center text-sm font-medium text-white shadow-xs sm:ml-3 sm:w-auto bg-green-600 cursor-pointer",disabled:t,children:t?e.jsxs("div",{className:"flex items-center gap-x-2",children:["Editing Priority ",e.jsx(E,{})]}):"Edit Priority"}),e.jsx("button",{type:"button","data-autofocus":!0,onClick:()=>i(!1),className:t?"mt-3 inline-flex w-full justify-center rounded-sm bg-white px-10 py-2 text-sm font-medium text-gray-900   cursor-not-allowed   hover:bg-gray-50 sm:mt-0 sm:w-auto border-1":"mt-3 inline-flex w-full justify-center rounded-sm bg-white px-10 py-2 text-sm font-medium text-gray-900   cursor-pointer   hover:bg-gray-50 sm:mt-0 sm:w-auto border-1",disabled:t,children:"Cancel"})]})]})})})]})}g.propTypes={open:m.bool.isRequired,setOpen:m.func.isRequired,selectedTrackingNo:m.object};function N({data:s}){const[i,l]=d.useState(!1),[a,o]=d.useState(null),c=t=>{const r=s.find(u=>u.trackingNo===t);o(r),l(!0)},n=t=>t==="In Transit"?`${f.transit} text-white px-5 py-1 rounded-full capitalize`:t==="In Receiving"?`${f.receiving} text-white px-5 py-1 rounded-full capitalize`:t==="Delivered"?`${f.delivered} text-white px-5 py-1 rounded-full capitalize`:"bg-gray-400 text-white px-5 py-1 rounded-full capitalize";return e.jsxs(e.Fragment,{children:[i&&e.jsx(g,{open:i,setOpen:l,selectedTrackingNo:a}),e.jsx("div",{className:"table_section font-inter w-full mt-5  ",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("div",{className:"-m-1.5 overflow-x-auto",children:e.jsx("div",{className:"p-1.5 min-w-full inline-block align-middle",children:e.jsxs("div",{className:"border rounded-lg divide-y divide-gray-200",children:[e.jsx("div",{className:"py-5 px-4"}),e.jsxs("div",{className:"overflow-hidden",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"th-user-table",children:e.jsx("tr",{children:k.map((t,r)=>e.jsx("th",{className:"px-6 py-3",children:t},r))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map((t,r)=>e.jsxs("tr",{className:r%2===0?"bg-[#F3F4F6]":"",children:[e.jsxs("td",{className:"td-admin-table  ",children:[r+1," "]}),e.jsx("td",{className:"td-admin-table ",children:t.trackingNo}),e.jsx("td",{className:"td-admin-table capitalize ",children:t.customerName}),e.jsx("td",{className:"td-admin-table  capitalize",children:t.address}),e.jsx("td",{className:"td-admin-table capitalize",children:e.jsx("span",{className:n(t.epodStatus),children:t.epodStatus})}),e.jsx("td",{className:"td-admin-table ",children:t.priority||" - "}),e.jsx("td",{className:"td-admin-table ",children:e.jsx("button",{onClick:()=>c(t.trackingNo),className:"text-green-600 cursor-pointer outline-none",children:"Edit"})})]},t._id))})]}),s.length===0&&e.jsx("p",{className:"text-gray-500 font-medium ml-5 py-5",children:"No deliveries found for the selected plate number."})]})]})})})})})]})}N.propTypes={data:m.array.isRequired};const A="https://prics-epod-backend.onrender.com";function G(){const{id:s}=j(),[i,l]=d.useState([]),[a,o]=d.useState(!1);return d.useEffect(()=>{(async()=>{o(!0);try{const n=await y.get(`${A}/api/shipment/${s}`);l(n.data)}catch(n){console.log(n),h.error("We could not retrieve your shipment data. Please try again later.",{style:{backgroundColor:"#ff4d4d",color:"#fff"}})}finally{o(!1)}})()},[s]),e.jsxs("div",{className:"my-5 mx-4",children:[e.jsxs(b,{className:"max-w-[320px]",children:[e.jsx(v,{children:e.jsxs("div",{className:"flex justify-between items-center ",children:[e.jsx(w,{className:"font-inter text-base font-medium",children:"Plate Number"}),e.jsx(_,{size:25})]})}),e.jsxs(P,{children:[e.jsx("h1",{className:"text-5xl font-bebas tracking-wider",children:s}),e.jsx("p",{className:"text-sm text-[#6c757d] mt-5",children:"This truckâ€™s plate number is associated with a list of tracking numbers, and you can set an order priority."})]})]}),a?e.jsx("p",{className:"mt-5",children:"Loading..."}):e.jsx(N,{data:i})]})}export{G as default};
